<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>KADIMA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Lobster&family=Montserrat:wght@500;700;800&display=swap" rel="stylesheet">

<style>
:root{
--bg:#F8F3E9;
--terracotta:#C76B2F;
--gold:#D4A017;
--green:#1F4D3A;
--meat:#8B1E1E;
}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
body{margin:0;font-family:'Montserrat',sans-serif;background:var(--bg);color:#2b2b2b;}

.header{
  padding:16px 12px 26px;
  background:linear-gradient(135deg,var(--terracotta),var(--gold));
  color:white;
  box-shadow:0 6px 18px rgba(120,70,20,.25);
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  text-align:center;
}
.header img{position:absolute;left:12px;width:110px;}

.brand-title{font-family:'Lobster',cursive;font-size:36px;}
.brand-sub{font-weight:800;font-size:15px;}

/* ‚úÖ –¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π */
.brand-phone{position:relative; z-index:30; pointer-events:auto;}
.brand-phone a{
  color:white;
  text-decoration:none;
  font-size:15px;
  font-weight:700;
  position:relative;
  z-index:31;
  pointer-events:auto;
}

/* ‚úÖ –ö–æ–Ω—Ç—É—Ä —É –∫–Ω–æ–ø–∫–∏ –ø–æ–∏—Å–∫–∞ + –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç—å */
.search-btn{
  position:absolute;
  right:14px;
  bottom:10px;
  width:34px;
  height:34px;
  border-radius:50%;
  background:white;
  color:#333;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:16px;
  font-weight:700;
  border:2px solid #000;
  cursor:pointer;
  z-index:25;
}

.langs,.types,.payments{display:flex;gap:12px;padding:12px;justify-content:center;}

/* ‚úÖ –ö–æ–Ω—Ç—É—Ä —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ */
.btn{
  padding:12px 20px;
  border-radius:28px;
  background:#fffdf9;
  border:2px solid #000;
  font-weight:700;
  min-width:120px;
  text-align:center;
  cursor:pointer;
}
.btn.active{
  background:linear-gradient(135deg,var(--terracotta),var(--gold));
  color:white;
  border:2px solid #000;
}

.input{
  margin:8px auto;
  display:block;
  padding:14px;
  width:85%;
  border-radius:20px;
  border:2px solid #000;
  background:#fffdf9;
  font-size:15px;
}

.categories{display:flex;gap:12px;padding:14px;overflow-x:auto;}
.products{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;padding:12px;}

/* ‚úÖ –ö–æ–Ω—Ç—É—Ä –∫–∞—Ä—Ç–æ—á–µ–∫ */
.card{
  border-radius:20px;
  background:#fffdf9;
  box-shadow:0 8px 18px rgba(120,70,20,.15);
  padding:10px;
  text-align:center;
  border:2px solid #000;
}

.img{height:70px;display:flex;align-items:center;justify-content:center;}
.img img{max-width:58px;opacity:.9;}
.price{font-weight:800;color:var(--meat);margin-top:6px;}
.counter{display:flex;justify-content:center;gap:10px;margin-top:6px;}

/* ‚úÖ –ö–æ–Ω—Ç—É—Ä —É +/- */
.counter button{
  width:30px;
  height:30px;
  border-radius:50%;
  border:2px solid #000;
  background:var(--green);
  color:white;
  font-size:16px;
  cursor:pointer;
}

.cart{
  background:#fffdf9;
  margin:12px;
  padding:16px;
  border-radius:20px;
  border:2px solid #000;
}

textarea.input{height:90px;}

/* ‚úÖ –ö–æ–Ω—Ç—É—Ä —É –∫–Ω–æ–ø–∫–∏ –∑–∞–∫–∞–∑–∞ */
.order-btn{
  width:100%;
  padding:18px;
  margin-top:14px;
  border:2px solid #000;
  border-radius:20px;
  background:linear-gradient(135deg,var(--green),#2e7d32);
  color:white;
  font-size:17px;
  font-weight:800;
  cursor:pointer;
}

.popup{position:fixed;inset:0;background:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:.3s;}
.popup.show{opacity:1;pointer-events:auto;}
.popup-box{background:white;padding:26px;border-radius:20px;text-align:center;font-weight:700;border:2px solid #000;}
</style>
</head>

<body>

<div class="header">
  <img src="logo.png" onerror="this.src='logo.png'">
  <div>
    <div class="brand-title">KADIMA</div>
    <div class="brand-sub">Signature taste</div>
    <div class="brand-phone">
      <a href="tel:+998905389999">+998 90 538 99 99</a>
    </div>
  </div>
  <!-- ‚úÖ –ü–æ–∏—Å–∫ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π -->
  <div class="search-btn" onclick="toggleSearch()">üîç</div>
</div>

<!-- ‚úÖ –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ (—Å–∫—Ä—ã—Ç–æ, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–æ–π üîç) -->
<input id="searchInput" class="input" style="display:none" placeholder="–ü–æ–∏—Å–∫ –±–ª—é–¥–∞..." oninput="searchProducts()">

<div class="langs">
  <button class="btn active" onclick="setLang('ru',this)">RU</button>
  <button class="btn" onclick="setLang('uz',this)">UZ</button>
  <button class="btn" onclick="setLang('en',this)">EN</button>
</div>

<div class="types">
  <button class="btn active" id="btnDelivery" onclick="setType('delivery',this)"></button>
  <button class="btn" id="btnPickup" onclick="setType('pickup',this)"></button>
</div>

<input id="address" class="input">
<input id="phone" class="input">

<div class="categories" id="cats"></div>
<div class="products" id="products"></div>

<div class="cart">
  <b id="cartTitle"></b>: <span id="total">0</span> —Å—É–º
  <textarea id="comment" class="input"></textarea>
  <div class="payments">
    <button class="btn active" id="payCash" onclick="setPayment('cash')"></button>
    <button class="btn" id="payClick" onclick="setPayment('click')"></button>
  </div>
  <button class="order-btn" id="orderBtn" onclick="sendOrder()"></button>
</div>

<div class="popup" id="popup"><div class="popup-box">‚úÖ –ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç!</div></div>

<script>
Telegram.WebApp.ready();

/* ‚úÖ –ù–∏–∫/–¥–∞–Ω–Ω—ã–µ Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
const tgUser = Telegram.WebApp.initDataUnsafe?.user || {};
const tg_username = tgUser.username || "";
const tg_first_name = tgUser.first_name || "";
const tg_id = tgUser.id || "";

/* —Ç–≤–æ—ë ‚Äî –Ω–µ —É–¥–∞–ª—è–ª */
let lang='ru',category='salads',type='delivery',payment='cash',cart={};

const TEXT={
ru:{delivery:'üöö –î–æ—Å—Ç–∞–≤–∫–∞',pickup:'üèÉ –°–∞–º–æ–≤—ã–≤–æ–∑',address:'üìç –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏',phone:'üìû –¢–µ–ª–µ—Ñ–æ–Ω',cart:'üõí –ö–æ—Ä–∑–∏–Ω–∞',order:'–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑',comment:'‚úçÔ∏è –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É',cash:'üíµ –ù–∞–ª–∏—á–Ω—ã–µ',click:'üí≥ CLICK'},
uz:{delivery:'üöö Yetkazish',pickup:'üèÉ Olib ketish',address:'üìç Manzil',phone:'üìû Telefon',cart:'üõí Savat',order:'Buyurtma berish',comment:'‚úçÔ∏è Izoh',cash:'üíµ Naqd',click:'üí≥ CLICK'},
en:{delivery:'üöö Delivery',pickup:'üèÉ Pickup',address:'üìç Address',phone:'üìû Phone',cart:'üõí Cart',order:'Place order',comment:'‚úçÔ∏è Comment',cash:'üíµ Cash',click:'üí≥ CLICK'}
};

const CATS={ru:{salads:'ü•ó –°–∞–ª–∞—Ç—ã',kebab:'üî• –®–∞—à–ª—ã–∫',national:'üç≤ –ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –±–ª—é–¥–∞',grill:'ü•© –ë–ª—é–¥–∞ –Ω–∞ –º–∞–Ω–≥–∞–ª–µ',first:'üçú –ü–µ—Ä–≤—ã–µ –±–ª—é–¥–∞',drinks:'ü•§ –ù–∞–ø–∏—Ç–∫–∏',bread:'ü•ñ –•–ª–µ–±'},
uz:{salads:'ü•ó Salatlar',kebab:'üî• Shashlik',national:'üç≤ Milliy taomlar',grill:'ü•© Mangal taomlari',first:'üçú Birinchi taomlar',drinks:'ü•§ Ichimliklar',bread:'ü•ñ Non'},
en:{salads:'ü•ó Salads',kebab:'üî• Kebab',national:'üç≤ National dishes',grill:'ü•© Grill dishes',first:'üçú First dishes',drinks:'ü•§ Drinks',bread:'ü•ñ Bread'}};

const MENU = { /* –í–°–Å –ú–ï–ù–Æ –¢–£–¢ (–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) */
salads:[['–°–≤–µ–∂–∏–π',30000,'images/svejiy.jpg'],['–°–∞–ª–∞—Ç ¬´–ê—á–∏—á—É–∫¬ª',30000,'images/achichuk.png'],['–°–∞–ª–∞—Ç ¬´–®–∞–∫–∞—Ä–æ–ø¬ª',30000,'images/shakarop.png'],['–°–∞–ª–∞—Ç ¬´–ß–∏—Ä–æ–∫—á–∏¬ª',30000,'images/chirokchi.png'],['–°–∞–ª–∞—Ç ¬´–ú—è—Å–Ω–æ–π¬ª',35000,'images/myasnoy.jpg'],['–°–∞–ª–∞—Ç ¬´–ì—Ä–µ—á–µ—Å–∫–∏–π¬ª',40000,'images/grecheskiy.jpg'],['–°–∞–ª–∞—Ç ¬´–ú–∞–∂–Ω—É–Ω—Ç–æ–ª¬ª',30000,'images/mazhnuntol.jpg'],['–°–∞–ª–∞—Ç ¬´–ú—É–∂—Å–∫–æ–π –∫–∞–ø—Ä–∏–∑¬ª',35000,'images/muzhskoy_kapriz.jpg'],['–°–∞–ª–∞—Ç ¬´–î–∞–º—Å–∫–∏–π –∫–∞–ø—Ä–∏–∑¬ª',35000,'images/damskiy_kapriz.jpg'],['–°–∞–ª–∞—Ç ¬´–û–ª–∏–≤—å–µ¬ª',30000,'images/olivye.jpg'],['–°–∞–ª–∞—Ç ¬´–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π¬ª',35000,'images/frantsuzskiy.jpg'],['–°–∞–ª–∞—Ç ¬´–°–º–∞–∫¬ª',35000,'images/smak.jpg'],['–¶–µ–∑–∞—Ä—å',35000,'images/cezar.jpg'],['–•—Ä—É—Å—Ç—è—â–∏–π –±–∞–∫–ª–∞–∂–∞–Ω',45000,'images/baklajan.jpg']],
kebab:[['–ú–æ–ª–æ—Ç—ã–π',28000,'images/molotiy.jpg'],['–ú–æ–ª–æ—Ç—ã–π –º–∏–∫—Å',30000,'images/molotiy_mix.jpg'],['–ö—É—Å–∫–æ–≤–æ–π –±–∞—Ä–∞–Ω–∏–Ω–∞',30000,'images/kuskovoy_baranina.jpg'],['–†—É–ª–µ—Ç',30000,'images/rulet.jpg'],['–ù–∞–ø–æ–ª–µ–æ–Ω',30000,'images/napoleon.jpg'],['–ö–æ—Ä–µ–π–∫–∞',40000,'images/koreyka.jpg'],['–ë—ã–∫–∏–Ω',40000,'images/bykin.jpg'],['–†–µ–±—Ä—ã—à–∫–∏ (—Å–µ–º–µ—á–∫–∏)',30000,'images/rebryshki.jpg'],['–ü–µ—á–µ–Ω—å',22000,'images/pechen.jpg'],['–ö—É—Ä–¥—é–∫',30000,'images/kurdyuk.jpg'],['–ü–æ–º–∏–¥–æ—Ä—ã 3—à—Ç',12000,'images/pomidory.jpg'],['–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å 3—à—Ç',10000,'images/kartofel.jpg'],['–ì–æ–≤—è–∂—å—è –≤—ã—Ä–µ–∑–∫–∞',30000,'images/govyazhya_vyrezka.jpg'],['–ö—É—Ä–∏–Ω–æ–µ —Ñ–∏–ª–µ',22000,'images/kurinoe_file.jpg'],['–ö—É—Ä–∏–Ω—ã–µ –∫—Ä—ã–ª—ã—à–∫–∏',22000,'images/krylyshki.jpg'],['–ë–æ–º–±–æ—á–∫–∞',30000,'images/bombochka.jpg'],['–ì–æ–≤—è–¥–∏–Ω–∞ –æ—Ç–±–∏–≤–Ω–∞—è',35000,'images/otbivnaya.jpg'],['–ö–æ—Ç–ª–µ—Ç—ã 1—à—Ç',30000,'images/kotlety.jpg'],['–ß–µ–±—É—Ä–µ–∫ –Ω–∞ –º–∞–Ω–≥–∞–ª–µ',30000,'images/cheburek.jpg'],['–ö–æ–ª–±–∞—Å–∫–∏ –æ—Å—Ç—Ä—ã–µ 1—à—Ç',17000,'images/kolbaski_ostrye.jpg'],['–û–≤–æ—â–Ω–æ–π –º–∏–∫—Å',15000,'images/ovoshchnoy_mix.jpg'],['–ö–æ–ª–±–∞—Å–∫–∏ –º–æ–ª–æ—á–Ω—ã–µ 1—à—Ç',17000,'images/kolbaski_molochnye.jpg'],['–ì—Ä–∏–±—ã —à–∞–º–ø–∏–Ω—å–æ–Ω—ã',15000,'images/griby.jpg']],
national:[['–ñ–∏–∑ –ë–∏–∑ –ë–∞—Ä–∞–Ω–∏–Ω–∞ 1–∫–≥',260000,'images/jiz_biz_baranina_1kg.jpg'],['–ñ–∏–∑ –ë–∏–∑ –ë–∞—Ä–∞–Ω–∏–Ω–∞ 0.5–∫–≥',130000,'images/jiz_biz_baranina_05kg.jpg'],['–ñ–∏–∑ –ë–∏–∑ –∏–∑ –≤—ã—Ä–µ–∑–∫–∏ 1–∫–≥',300000,'images/jiz_biz_vyrezka_1kg.jpg'],['–ñ–∏–∑ –ë–∏–∑ –∏–∑ –≤—ã—Ä–µ–∑–∫–∏ 0.5–∫–≥',150000,'images/jiz_biz_vyrezka_05kg.jpg']],
grill:[['–°—Ç–µ–π–∫ –∫—É—Ä–∏–Ω—ã–π',100000,'images/steyk_kuriniy.jpg'],['–°—Ç–µ–π–∫ –¢–∏–±–æ–Ω 100–≥—Ä',20000,'images/steyk_tibon.jpg'],['–°—Ç–µ–π–∫ –í–∞–≥—É—Ä–∏',200000,'images/steyk_vaguri.jpg'],['–ë–∞—Ä–∞–Ω–∏–Ω–∞ —Å –≥—Ä–∏–±–∞–º–∏ 0.5–∫–≥',100000,'images/baranina_griby_05kg.jpg'],['–ë–∞—Ä–∞–Ω–∏–Ω–∞ —Å –≥—Ä–∏–±–∞–º–∏ 1–∫–≥',200000,'images/baranina_griby_1kg.jpg'],['–ì–æ–≤—è–∂—å—è –≤—ã—Ä–µ–∑–∫–∞ —Å –æ–≤–æ—â–∞–º–∏ 0.5–∫–≥',180000,'images/vyrezka_ovoshi_05kg.jpg'],['–ì–æ–≤—è–∂—å—è –≤—ã—Ä–µ–∑–∫–∞ —Å –æ–≤–æ—â–∞–º–∏ 1–∫–≥',360000,'images/vyrezka_ovoshi_1kg.jpg']],
first:[['–®—É—Ä–ø–∞',35000,'images/shurpa.jpg'],['–©–∏ –∑–µ–ª–µ–Ω—ã–µ',25000,'images/shi_zelenye.jpg'],['–ë–æ—Ä—â —Å–æ —Å–º–µ—Ç–∞–Ω–æ–π',25000,'images/borsh.jpg'],['–ì—É–∂–∞',25000,'images/guzha.jpg'],['–ú–∞—Å—Ç–∞–≤–∞',25000,'images/mastava.jpg']],
drinks:[['–ß–∞–π —á–µ—Ä–Ω—ã–π / –∑–µ–ª–µ–Ω—ã–π',5000,'images/chay.jpg'],['–ß–∞–π —Å –ª–∏–º–æ–Ω–æ–º',15000,'images/chay_limon.jpg'],['Fanta 1L',14000,'images/fanta_1l.jpg'],['Fanta 1.5L',18000,'images/fanta_15l.jpg'],['Coca Cola 1L',14000,'images/coca_cola_1l.jpg'],['Coca Cola 1.5L',18000,'images/coca_cola_15l.jpg'],['–°–æ–∫ –°–æ—á–Ω–∞—è –î–æ–ª–∏–Ω–∞ 1L',20000,'images/sok_sochnaya_dolina.png'],['Pepsi 1L',14000,'images/pepsi_1l.jpg'],['Pepsi 1.5L',18000,'images/pepsi_15l.jpg'],['–ú–∏–Ω–µ—Ä–∞–ª—å–Ω–∞—è –≤–æ–¥–∞ Chortoq 0.5L',15000,'images/chortoq_gaz_05l.jpg'],['–í–æ–¥–∞ –±–µ–∑ –≥–∞–∑–∞ Chortoq 1L',6000,'images/chortoq_1l.jpg'],['–í–æ–¥–∞ –±–µ–∑ –≥–∞–∑–∞ Chortoq 1.5L',8000,'images/chortoq_15l.jpg'],['–õ–∏–º–æ–Ω–∞–¥ –¢–∞—Ä—Ö—É–Ω 0.5L',12000,'images/tarhun_05l.jpg'],['–õ–∏–º–æ–Ω–∞–¥ –î—é—à–µ—Å 0.5L',12000,'images/dyushes_05l.jpg'],['–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫ Saber 0.5L',15000,'images/saber_05l.jpg']]
};

/* —Ç–≤–æ—ë ‚Äî –Ω–µ —É–¥–∞–ª—è–ª */
function setLang(l,b){lang=l;document.querySelectorAll('.langs .btn').forEach(x=>x.classList.remove('active'));b.classList.add('active');applyLang();}
function applyLang(){
  btnDelivery.innerText=TEXT[lang].delivery;
  btnPickup.innerText=TEXT[lang].pickup;
  address.placeholder=TEXT[lang].address;
  phone.placeholder=TEXT[lang].phone;
  cartTitle.innerText=TEXT[lang].cart;
  orderBtn.innerText=TEXT[lang].order;
  comment.placeholder=TEXT[lang].comment;
  payCash.innerText=TEXT[lang].cash;
  payClick.innerText=TEXT[lang].click;
  renderCats();
  renderProducts();
}

function renderCats(){
  cats.innerHTML='';
  for(let k in MENU){
    cats.innerHTML+=`<button class="btn ${k===category?'active':''}" onclick="category='${k}';renderCats();renderProducts()">${CATS[lang][k]}</button>`;
  }
}

/* ‚úÖ –†–µ–Ω–¥–µ—Ä –±–ª—é–¥ (–∫–∞–∫ —É —Ç–µ–±—è) */
function renderProducts(){
  products.innerHTML='';
  MENU[category].forEach(([n,p,img])=>{
    cart[n]=cart[n]||0;
    products.innerHTML+=`<div class="card"><div class="img"><img src="${img}" onerror="this.src='logo.png'"></div><div>${n}</div><div class="price">${p} —Å—É–º</div><div class="counter"><button onclick="chg('${n}',-1)">‚àí</button><span id="c_${n}">${cart[n]}</span><button onclick="chg('${n}',1)">+</button></div></div>`;
  });
}

function chg(n,v){
  cart[n]=Math.max(0,(cart[n]||0)+v);
  const el = document.getElementById('c_'+n);
  if(el) el.innerText=cart[n];
  updateTotal();
}

function updateTotal(){let s=0;for(let k in cart)s+=cart[k]*price(k);total.innerText=s;}
function price(n){for(let c in MENU)for(let i of MENU[c])if(i[0]==n)return i[1];}
function setType(t,b){type=t;document.querySelectorAll('.types .btn').forEach(x=>x.classList.remove('active'));b.classList.add('active');}
function setPayment(p){payment=p;payCash.classList.toggle('active',p==='cash');payClick.classList.toggle('active',p==='click');}

/* ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –±–ª—é–¥–∞–º –≤–æ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö */
function toggleSearch(){
  const si = document.getElementById('searchInput');
  const isHidden = (si.style.display === 'none' || si.style.display === '');
  si.style.display = isHidden ? 'block' : 'none';
  if(isHidden){ si.value=''; si.focus(); searchProducts(); }
  else { si.value=''; renderProducts(); }
}

function searchProducts(){
  const q = (document.getElementById('searchInput').value || '').trim().toLowerCase();
  if(!q){ renderProducts(); return; }

  products.innerHTML='';
  for(let c in MENU){
    MENU[c].forEach(([n,p,img])=>{
      if(String(n).toLowerCase().includes(q)){
        cart[n]=cart[n]||0;
        products.innerHTML+=`<div class="card"><div class="img"><img src="${img}" onerror="this.src='logo.png'"></div><div>${n}</div><div class="price">${p} —Å—É–º</div><div class="counter"><button onclick="chg('${n}',-1)">‚àí</button><span id="c_${n}">${cart[n]}</span><button onclick="chg('${n}',1)">+</button></div></div>`;
      }
    });
  }
}

/* ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ + –Ω–∏–∫ Telegram */
function sendOrder(){
  popup.classList.add('show');
  setTimeout(()=>{
    Telegram.WebApp.sendData(JSON.stringify({
      tg: { id: tg_id, username: tg_username, first_name: tg_first_name },
      order: cart,
      total: total.innerText,
      payment,
      type,
      address: address.value,
      phone: phone.value,
      comment: comment.value
    }));
    Telegram.WebApp.close();
  },1200);
}

applyLang();
</script>
</body>
</html>
